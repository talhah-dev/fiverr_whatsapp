<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>WhatsApp ‚Äî overlay demos (text & image)</title>

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome (header icons only) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
        crossorigin="anonymous" />
    <!-- Lucide (thin outline icons for the sheet) -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        .chat-wallpaper {
            background:
                radial-gradient(circle at 2px 2px, rgba(0, 0, 0, .05) 2px, transparent 2px) 0 0/30px 30px,
                linear-gradient(180deg, #efeae2 0%, #e5ddd5 100%);
        }

        .wh-header {
            background: #008069;
        }

        .sent {
            background: #DCF8C6;
        }

        .phone {
            box-shadow: 0 24px 60px rgba(0, 0, 0, .25), 0 3px 12px rgba(0, 0, 0, .12);
        }

        .glass {
            background: linear-gradient(180deg, rgba(255, 255, 255, .78), rgba(255, 255, 255, .58));
            backdrop-filter: blur(18px) saturate(120%);
            -webkit-backdrop-filter: blur(18px) saturate(120%);
            border: 1px solid rgba(255, 255, 255, .45);
        }

        /* Overlay: fade only (no scale) to avoid corner gaps; animate inner layers instead */
        .fade {
            transition: opacity .18s ease-out;
        }

        .ov-hidden {
            opacity: 0;
            pointer-events: none;
        }

        .ov-shown {
            opacity: 1;
            pointer-events: auto;
        }

        .anim {
            transition: opacity .18s ease-out, transform .18s ease-out;
        }

        .ov-hidden .anim {
            opacity: 0;
            transform: translateY(6px) scale(.98);
        }

        .ov-shown .anim {
            opacity: 1;
            transform: none;
        }

        /* Reactions pill */
        .reactions {
            background: rgba(255, 255, 255, .94);
            backdrop-filter: blur(12px) saturate(120%);
            -webkit-backdrop-filter: blur(12px) saturate(120%);
            border: 1px solid rgba(0, 0, 0, .06);
            box-shadow: 0 12px 28px rgba(0, 0, 0, .14), 0 2px 4px rgba(0, 0, 0, .06);
        }

        .reactions span {
            line-height: 1;
            transform: translateY(1px);
        }

        .rx-more {
            width: 28px;
            height: 28px;
            display: grid;
            place-items: center;
            border-radius: 9999px;
            background: rgba(255, 255, 255, .96);
            border: 1px solid rgba(0, 0, 0, .08);
            color: #525252;
            box-shadow: inset 0 1px 0 rgba(255, 255, 255, .8), 0 6px 18px rgba(0, 0, 0, .08);
        }

        .rx-more:hover {
            background: #fff;
            color: #3f3f3f;
        }

        .rx-more svg {
            width: 16px;
            height: 16px;
        }

        /* Sheet rows + outline icons */
        .wa-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
        }

        .wa-item:hover {
            background: rgba(255, 255, 255, .45);
            transition: background .15s ease;
        }

        .wa-ico>svg {
            width: 22px;
            height: 22px;
            stroke-width: 1.8;
        }

        .sheet svg {
            stroke: currentColor;
            fill: none;
            stroke-linecap: round;
            stroke-linejoin: round;
        }
    </style>
</head>

<body class="min-h-screen bg-neutral-200 p-6">
    <div class="mx-auto max-w-[920px] grid grid-cols-1 md:grid-cols-2 gap-8 items-start">
        <!-- ======================= TEXT VARIANT ======================= -->
        <section id="phone-text"
            class="phone relative w-[392px] h-[780px] bg-white rounded-[32px] overflow-hidden justify-self-center">
            <!-- Header -->
            <header class="wh-header h-14 px-4 flex items-center gap-3 text-white">
                <i class="fa-solid fa-angle-left text-xl"></i>
                <div class="w-9 h-9 rounded-full bg-white/20"></div>
                <div class="flex-1">
                    <p class="text-[15px] font-semibold leading-4">Aleyna</p>
                    <p class="text-xs text-white/80 leading-4">online</p>
                </div>
                <i class="fa-solid fa-video text-lg"></i>
                <i class="fa-solid fa-phone text-lg ml-4"></i>
                <i class="fa-solid fa-ellipsis-vertical text-lg ml-4"></i>
            </header>

            <!-- Chat -->
            <div id="chat-text" class="chat-wallpaper h-[calc(100%-56px)] overflow-y-auto p-3 pb-24 relative">
                <div class="space-y-2">
                    <div class="flex justify-end">
                        <div class="max-w-[72%] rounded-2xl rounded-br-md px-3 py-2 text-[13px] sent">On my way üöó</div>
                    </div>
                    <div class="flex justify-end">
                        <div class="max-w-[72%] rounded-2xl rounded-br-md px-3 py-2 text-[13px] sent">5 mins</div>
                    </div>
                </div>

                <!-- received TEXT ONLY -->
                <div class="mt-6">
                    <div data-bubble
                        class="inline-block max-w-[82%] bg-white rounded-2xl rounded-bl-md px-3 py-2 shadow-sm cursor-pointer">
                        <p class="text-[14px] text-neutral-800">
                            Aleyna ich komm dich jetzt abholen ‚Äì hab neuen AMG, lass ihn einweihen
                        </p>
                        <div class="text-[10px] text-neutral-400 mt-1 text-right">16:54</div>
                    </div>
                </div>
            </div>

            <!-- Input -->
            <footer class="absolute bottom-0 left-0 right-0 bg-white border-t px-3 py-2 flex items-center gap-2">
                <i class="fa-regular fa-face-smile text-xl text-neutral-600"></i>
                <input class="flex-1 rounded-full bg-neutral-100 px-4 py-2 text-[14px] outline-none"
                    placeholder="Nachricht schreiben‚Ä¶" />
                <i class="fa-solid fa-paperclip text-lg text-neutral-600"></i>
                <button class="w-10 h-10 rounded-full text-white grid place-items-center" style="background:#008069;">
                    <i class="fa-solid fa-paper-plane"></i>
                </button>
            </footer>

            <!-- Overlay -->
            <div id="overlay-text" class="absolute inset-0 z-50 ov-hidden fade">
                <div id="ov-bg-text" class="absolute inset-0 bg-white/55 backdrop-blur-[3px] z-[50]"></div>

                <div id="reactions-text"
                    class="reactions anim absolute z-[70] rounded-full px-3 py-1 flex items-center gap-2">
                    <span class="text-[20px] leading-none">üëç</span>
                    <span class="text-[20px] leading-none">‚ù§Ô∏è</span>
                    <span class="text-[20px] leading-none">üòÇ</span>
                    <span class="text-[20px] leading-none">üòÆ</span>
                    <span class="text-[20px] leading-none">üò¢</span>
                    <span class="text-[20px] leading-none">üôè</span>
                    <span class="text-[20px] leading-none">üî•</span>
                    <button class="rx-more ml-1" aria-label="More reactions">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.25"
                            stroke-linecap="round">
                            <path d="M12 5v14M5 12h14" />
                        </svg>
                    </button>
                </div>

                <div id="sheet-text"
                    class="sheet anim glass rounded-2xl overflow-hidden shadow-2xl border border-white/40 absolute z-[70]">
                    <ul class="text-[14px] min-w-[270px]">
                        <li class="wa-item"><span>Antworten</span><i data-lucide="corner-down-left" class="wa-ico"></i>
                        </li>
                        <li class="wa-item"><span>Weiterleiten</span><i data-lucide="corner-down-right"
                                class="wa-ico"></i></li>
                        <li class="wa-item"><span>Kopieren</span><i data-lucide="copy" class="wa-ico"></i></li>
                        <li class="wa-item"><span>Mit Stern markieren</span><i data-lucide="star" class="wa-ico"></i>
                        </li>
                        <li class="wa-item"><span>Fixieren</span><i data-lucide="pin" class="wa-ico"></i></li>
                        <li class="wa-item"><span>Melden</span><i data-lucide="flag" class="wa-ico"></i></li>
                        <li class="wa-item text-red-600"><span>L√∂schen</span><i data-lucide="trash-2"
                                class="wa-ico"></i></li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- ======================= IMAGE VARIANT ======================= -->
        <section id="phone-image"
            class="phone relative w-[392px] h-[780px] bg-white rounded-[32px] overflow-hidden justify-self-center">
            <!-- Header -->
            <header class="wh-header h-14 px-4 flex items-center gap-3 text-white">
                <i class="fa-solid fa-angle-left text-xl"></i>
                <div class="w-9 h-9 rounded-full bg-white/20"></div>
                <div class="flex-1">
                    <p class="text-[15px] font-semibold leading-4">Aleyna</p>
                    <p class="text-xs text-white/80 leading-4">online</p>
                </div>
                <i class="fa-solid fa-video text-lg"></i>
                <i class="fa-solid fa-phone text-lg ml-4"></i>
                <i class="fa-solid fa-ellipsis-vertical text-lg ml-4"></i>
            </header>

            <!-- Chat -->
            <div id="chat-image" class="chat-wallpaper h-[calc(100%-56px)] overflow-y-auto p-3 pb-24 relative">
                <div class="space-y-2">
                    <div class="flex justify-end">
                        <div class="max-w-[72%] rounded-2xl rounded-br-md px-3 py-2 text-[13px] sent">On my way üöó</div>
                    </div>
                    <div class="flex justify-end">
                        <div class="max-w-[72%] rounded-2xl rounded-br-md px-3 py-2 text-[13px] sent">5 mins</div>
                    </div>
                </div>

                <!-- received IMAGE ONLY -->
                <div class="mt-6">
                    <div data-bubble
                        class="inline-block max-w-[88%] rounded-2xl rounded-bl-md overflow-hidden shadow-sm bg-white cursor-pointer">
                        <img class="block w-full h-[190px] object-cover"
                            src="https://images.unsplash.com/photo-1704340142770-b52988e5b6eb?w=800&auto=format&fit=crop&q=60"
                            alt="car" />
                        <div class="text-[10px] text-neutral-400 px-2 py-1 text-right">16:54</div>
                    </div>
                </div>
            </div>

            <!-- Input -->
            <footer class="absolute bottom-0 left-0 right-0 bg-white border-t px-3 py-2 flex items-center gap-2">
                <i class="fa-regular fa-face-smile text-xl text-neutral-600"></i>
                <input class="flex-1 rounded-full bg-neutral-100 px-4 py-2 text-[14px] outline-none"
                    placeholder="Nachricht schreiben‚Ä¶" />
                <i class="fa-solid fa-paperclip text-lg text-neutral-600"></i>
                <button class="w-10 h-10 rounded-full text-white grid place-items-center" style="background:#008069;">
                    <i class="fa-solid fa-paper-plane"></i>
                </button>
            </footer>

            <!-- Overlay -->
            <div id="overlay-image" class="absolute inset-0 z-50 ov-hidden fade">
                <div id="ov-bg-image" class="absolute inset-0 bg-white/55 backdrop-blur-[3px] z-[50]"></div>

                <div id="reactions-image"
                    class="reactions anim absolute z-[70] rounded-full px-3 py-1 flex items-center gap-2">
                    <span class="text-[20px] leading-none">üëç</span>
                    <span class="text-[20px] leading-none">‚ù§Ô∏è</span>
                    <span class="text-[20px] leading-none">üòÇ</span>
                    <span class="text-[20px] leading-none">üòÆ</span>
                    <span class="text-[20px] leading-none">üò¢</span>
                    <span class="text-[20px] leading-none">üôè</span>
                    <span class="text-[20px] leading-none">üî•</span>
                    <button class="rx-more ml-1" aria-label="More reactions">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.25"
                            stroke-linecap="round">
                            <path d="M12 5v14M5 12h14" />
                        </svg>
                    </button>
                </div>

                <div id="sheet-image"
                    class="sheet anim glass rounded-2xl overflow-hidden shadow-2xl border border-white/40 absolute z-[70]">
                    <ul class="text-[14px] min-w-[270px]">
                        <li class="wa-item"><span>Antworten</span><i data-lucide="corner-down-left" class="wa-ico"></i>
                        </li>
                        <li class="wa-item"><span>Weiterleiten</span><i data-lucide="corner-down-right"
                                class="wa-ico"></i></li>
                        <li class="wa-item"><span>Kopieren</span><i data-lucide="copy" class="wa-ico"></i></li>
                        <li class="wa-item"><span>Mit Stern markieren</span><i data-lucide="star" class="wa-ico"></i>
                        </li>
                        <li class="wa-item"><span>Fixieren</span><i data-lucide="pin" class="wa-ico"></i></li>
                        <li class="wa-item"><span>Melden</span><i data-lucide="flag" class="wa-ico"></i></li>
                        <li class="wa-item text-red-600"><span>L√∂schen</span><i data-lucide="trash-2"
                                class="wa-ico"></i></li>
                    </ul>
                </div>
            </div>
        </section>
    </div>

    <script>
        function mountPhone(suffix) {
            const phone = document.getElementById(`phone-${suffix}`);
            const chat = document.getElementById(`chat-${suffix}`);
            const overlay = document.getElementById(`overlay-${suffix}`);
            const ovBg = document.getElementById(`ov-bg-${suffix}`);
            const reactions = document.getElementById(`reactions-${suffix}`);
            const sheet = document.getElementById(`sheet-${suffix}`);

            let activeBubble = null;
            const clamp = (v, min, max) => Math.max(min, Math.min(max, v));
            const openOverlay = () => overlay.classList.replace('ov-hidden', 'ov-shown');
            const closeOverlay = () => {
                overlay.classList.replace('ov-shown', 'ov-hidden');
                if (activeBubble) {
                    activeBubble.style.position = '';
                    activeBubble.style.zIndex = '';
                    activeBubble.removeEventListener('click', closeOverlay);
                    activeBubble = null;
                }
            };

            function openFor(bubble) {
                const p = phone.getBoundingClientRect();
                const b = bubble.getBoundingClientRect();
                const pad = 8;

                activeBubble = bubble;
                bubble.style.position = 'relative';
                bubble.style.zIndex = '60';

                openOverlay();

                reactions.style.left = '0px'; reactions.style.top = '0px';
                sheet.style.left = '0px'; sheet.style.top = '0px';

                requestAnimationFrame(() => {
                    const rxW = reactions.offsetWidth, rxH = reactions.offsetHeight;
                    const shW = sheet.offsetWidth, shH = sheet.offsetHeight;

                    const belowY = (b.top - p.top) + b.height + 10;
                    const aboveY = (b.top - p.top) - shH - 10;
                    const shTop = ((b.bottom + shH + 40) > p.bottom)
                        ? clamp(aboveY, pad, p.height - shH - pad)
                        : clamp(belowY, pad, p.height - shH - pad);
                    const shLeft = clamp(b.left - p.left, pad, p.width - shW - pad);
                    sheet.style.left = shLeft + 'px';
                    sheet.style.top = shTop + 'px';

                    let rxLeft = shLeft;
                    let rxTop = (b.top - p.top) - rxH - 8;
                    if (rxTop < pad) rxTop = (b.top - p.top) + b.height + 8;
                    rxLeft = clamp(rxLeft, pad, p.width - rxW - pad);
                    reactions.style.left = rxLeft + 'px';
                    reactions.style.top = rxTop + 'px';
                });

                bubble.addEventListener('click', closeOverlay);
            }

            // Open for any bubble **inside this phone**
            phone.querySelectorAll('[data-bubble]').forEach(b => {
                b.addEventListener('click', e => { e.stopPropagation(); openFor(b); });
            });

            // Close by clicking background / ESC / scroll
            ovBg.addEventListener('click', closeOverlay);
            document.addEventListener('keydown', e => { if (e.key === 'Escape') closeOverlay(); });
            chat.addEventListener('scroll', () => { if (overlay.classList.contains('ov-shown')) closeOverlay(); });
        }

        // Mount both variants
        mountPhone('text');
        mountPhone('image');

        // Render Lucide icons once
        if (window.lucide && lucide.createIcons) { lucide.createIcons(); }
    </script>

</body>

</html>